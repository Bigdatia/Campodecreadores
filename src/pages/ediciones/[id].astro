---
import LiteYouTube from "@/components/LiteYouTube.astro"
import Typography from "@/components/Typography.astro"
import { EDITIONS } from "@/consts/editions"
import Layout from "@/layouts/Layout.astro"
import { Image } from "astro:assets"

export const getStaticPaths = () => {
	return EDITIONS.map((edition) => ({
		params: { id: edition.id },
	}))
}

const { id } = Astro.params
const edition = EDITIONS.find((e) => e.id === id)

if (!edition) {
	return Astro.redirect("/404")
}

const videoId = new URL(edition.url).searchParams.get("v")

export const prerender = true
---

<Layout
	title={`${edition.name} · Campo de Creadores`}
	description={`Revive la edición ${edition.year} de Campo de Creadores.`}
	image={edition.poster}
>
	<main class="m-auto max-w-4xl px-4 py-20">
		<header class="flex flex-col items-center gap-8 text-center">
			<Image
				src={edition.poster}
				alt={`Póster de ${edition.name}`}
				width={300}
				height={450}
				class="aspect-[2/3] w-full max-w-xs rounded-lg object-cover shadow-lg"
			/>
			<Typography as="h1" variant="h1" color="primary" class="uppercase">
				{edition.name}
			</Typography>
		</header>

		{
			videoId && (
				<section class="mt-16">
					<LiteYouTube videoId={videoId} title={`Ver ${edition.name}`} />
				</section>
			)
		}
	</main>
</Layout>
